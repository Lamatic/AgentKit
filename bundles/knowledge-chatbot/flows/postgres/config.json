{
  "nodes": [
    {
      "id": "triggerNode_1",
      "type": "triggerNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "postgresNode",
        "modes": {
          "schemas": "list"
        },
        "trigger": true,
        "values": {
          "nodeName": "Postgres",
          "syncMode": "incremental_append",
          "cronExpression": "0 0 00 1/1 * ? * UTC"
        }
      }
    },
    {
      "id": "vectorizeNode_177",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "vectorizeNode",
        "values": {
          "nodeName": "Vectorise",
          "inputText": "{{codeNode_331.output}}",
          "embeddingModelName": {}
        }
      }
    },
    {
      "id": "codeNode_443",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "values": {
          "nodeName": "Transform Metadata",
          "code": "let vectors = {{vectorizeNode_177.output.vectors}};\nlet metadataProps = [];\n\nlet metadata = {}\nmetadata[\"title\"] = {{ variablesNode_543.output.title }};\nmetadata[\"content\"] = {{ codeNode_331.output }}[0]\nmetadata[\"source\"] = {{ variablesNode_543.output.source }};\n\nmetadataProps.push(metadata)\n\nconsole.log(\"finaldata:\", {\"metadata\": metadataProps, \"vectors\": vectors});\noutput = {\"metadata\": metadataProps, \"vectors\": vectors}"
        }
      }
    },
    {
      "id": "IndexNode_824",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "IndexNode",
        "values": {
          "nodeName": "Index to DB",
          "webhookURL": "https://webhook.site/685a66e7-b4d3-40a4-9801-99e3460414f9",
          "primaryKeys": [
            "title",
            "content"
          ],
          "vectorsField": "{{codeNode_443.output.vectors}}",
          "metadataField": "{{codeNode_443.output.metadata}}",
          "duplicateOperation": "overwrite"
        }
      }
    },
    {
      "id": "addNode_894",
      "type": "addNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "addNode",
        "values": {
          "nodeName": ""
        }
      }
    },
    {
      "id": "codeNode_331",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "values": {
          "nodeName": "Row Chunking",
          "code": "function objectToString(obj) {\n  return Object.entries(obj)\n    .map(([key, value]) => `${key}: ${value}`)\n    .join(\", \");\n}\n\noutput = [objectToString({{ triggerNode_1.output }})]"
        }
      }
    },
    {
      "id": "variablesNode_543",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "variablesNode",
        "modes": {},
        "values": {
          "nodeName": "Variables",
          "mapping": "{\n  \"title\": {\n    \"type\": \"string\",\n    \"value\": \"table_name\"\n  },\n  \"source\": {\n    \"type\": \"string\",\n    \"value\": \"postgres\"\n  }\n}"
        }
      }
    }
  ],
  "edges": [
    {
      "id": "codeNode_331-vectorizeNode_177",
      "source": "codeNode_331",
      "target": "vectorizeNode_177",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "vectorizeNode_177-codeNode_443",
      "source": "vectorizeNode_177",
      "target": "codeNode_443",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_443-IndexNode_824",
      "source": "codeNode_443",
      "target": "IndexNode_824",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "IndexNode_824-addNode_894",
      "source": "IndexNode_824",
      "target": "addNode_894",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "variablesNode_543-codeNode_331",
      "source": "variablesNode_543",
      "target": "codeNode_331",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "triggerNode_1-variablesNode_543",
      "source": "triggerNode_1",
      "target": "variablesNode_543",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    }
  ]
}