{
  "nodes": [
    {
      "id": "triggerNode_1",
      "data": {
        "modes": {},
        "nodeId": "graphqlNode",
        "values": {
          "nodeName": "API Request",
          "responeType": "async",
          "advance_schema": "{\n  \"sheetId\": \"string\",\n  \"columnId\": \"string\",\n  \"rowId\": \"string\",\n  \"instruction\": \"string\",\n  \"aiType\": \"string\",\n  \"data\": \"string\",\n  \"outputFormat\": \"string\",\n  \"webhookUrl\": \"string\"\n}"
        },
        "trigger": true
      },
      "type": "triggerNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1575,
        "y": 0
      },
      "selected": false
    },
    {
      "id": "conditionNode_312",
      "data": {
        "label": "Condition",
        "modes": [],
        "nodeId": "conditionNode",
        "values": {
          "nodeName": "Condition",
          "conditions": [
            {
              "label": "Condition 1",
              "value": "conditionNode_312-addNode_954",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"generate\"\n    }\n  ]\n}"
            },
            {
              "label": "Else",
              "value": "conditionNode_312-addNode_946",
              "condition": {}
            },
            {
              "label": "Condition 2",
              "value": "conditionNode_312-plus-node-addNode_608892-521",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"summarize\"\n    }\n  ]\n}"
            },
            {
              "label": "Condition 3",
              "value": "conditionNode_312-plus-node-addNode_163347-394",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"categorize\"\n    }\n  ]\n}"
            }
          ]
        }
      },
      "type": "conditionNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1575,
        "y": 150
      },
      "selected": false
    },
    {
      "id": "conditionNode_799",
      "data": {
        "label": "Condition",
        "modes": {},
        "nodeId": "conditionNode",
        "values": {
          "nodeName": "Condition",
          "conditions": [
            {
              "label": "Condition 1",
              "value": "conditionNode_799-addNode_587",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.outputFormat}}\",\n      \"operator\": \"==\",\n      \"value\": \"text\"\n    }\n  ]\n}"
            },
            {
              "label": "Else",
              "value": "conditionNode_799-addNode_161",
              "condition": {}
            },
            {
              "label": "Condition 2",
              "value": "conditionNode_799-plus-node-addNode_834736-660",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.outputFormat}}\",\n      \"operator\": \"==\",\n      \"value\": \"image\"\n    }\n  ]\n}"
            }
          ]
        }
      },
      "type": "conditionNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 450,
        "y": 300
      },
      "selected": false
    },
    {
      "id": "plus-node-addNode_782449",
      "data": {
        "label": "+",
        "nodeId": "addNode",
        "values": {}
      },
      "type": "addNode",
      "measured": {
        "width": 218,
        "height": 100
      },
      "position": {
        "x": 900,
        "y": 600
      }
    },
    {
      "id": "LLMNode_608",
      "data": {
        "label": "New",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an expert image prompt generator, who assists human requests to be fully converted to detailed prompts for big Image generation models to process and understand user image generation requests with minimal efforts. Your job is to understand the user instructions and given context, construct a 100-150 word detailed prompt encapsulating all that information. Make sure you are clear and direct in you answer leaving little room for interpretation ahead. GIVE NO LEADING STATEMENTS, JUST THE ANSWER."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCONTEXT : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Generate Image Prompt",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 450,
        "y": 450
      },
      "selected": false
    },
    {
      "id": "LLMNode_533",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Image Generation Assistant whose job is to fulfil the given user image gen request. GIVE NO LEADING STATEMENTS, JUST THE FINAL IMAGE AND A SHORT DESCRIPTION SHOULD DO."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "GIVE ME AN IMAGE OF THIS REQUEST : {{LLMNode_608.output.generatedResponse}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Generate Image",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 450,
        "y": 600
      },
      "selected": false
    },
    {
      "id": "LLMNode_432",
      "data": {
        "label": "New",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an expert prompt generator, who assists human requests to be fully converted to detailed prompts for big LLMs to process and understand user text generation requests with minimal efforts. Your job is to understand the user instructions and given context, construct a 100-150 word detailed prompt encapsulating all that information. Make sure you are clear and direct in you answer leaving little room for interpretation ahead. GIVE NO LEADING STATEMENTS, JUST THE ANSWER."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCONTEXTS : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Generate Text Prompt",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 0,
        "y": 450
      },
      "selected": false
    },
    {
      "id": "LLMNode_658",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Generation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER MARKDOWN FORMAT i.e. WELL SPACED AND SECTIONED IF THE NEED BE. REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE IN MARKDOWN AS IT WILL BE DISPLAYED STRAIGHT."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{LLMNode_432.output.generatedResponse}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Generate Text",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 0,
        "y": 600
      },
      "selected": false
    },
    {
      "id": "codeNode_750",
      "data": {
        "label": "New",
        "modes": {},
        "nodeId": "codeNode",
        "values": {
          "code": "let response = \"\";\n\nif({{LLMNode_658.output}} && {{LLMNode_658.output.generatedResponse}}){\n  response = {{LLMNode_658.output.generatedResponse}};\n} else if({{LLMNode_533.output}} && {{LLMNode_533.output.images}}){\n  const images = {{LLMNode_533.output.images}};\n  response = images[0];\n}\n\noutput = response || \"No output generated\";",
          "nodeName": "Finalise Generation Response"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 450,
        "y": 750
      },
      "selected": false
    },
    {
      "id": "codeNode_494",
      "data": {
        "label": "New",
        "modes": {},
        "nodeId": "codeNode",
        "values": {
          "code": "output = \"Invalid Request\"",
          "nodeName": "Invalid Request"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 2250,
        "y": 750
      },
      "selected": false
    },
    {
      "id": "LLMNode_588",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Summarisation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER MARKDOWN FORMAT i.e. WELL SPACED AND SECTIONED IF THE NEED BE. REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE IN MARKDOWN AS IT WILL BE DISPLAYED STRAIGHT."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "SUMMARISE BASED ON THE USER REQUEST : {{triggerNode_1.output.instruction}}\n\nAND CONTEXT PARAMS : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Summarisation",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1350,
        "y": 600
      },
      "selected": false
    },
    {
      "id": "codeNode_302",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "codeNode",
        "values": {
          "code": "output = {{LLMNode_588.output.generatedResponse}};",
          "nodeName": "Finalise Summary Response"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1350,
        "y": 750
      },
      "selected": false
    },
    {
      "id": "LLMNode_447",
      "data": {
        "label": "New",
        "modes": {},
        "nodeId": "LLMNode",
        "values": {
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Categorisation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER CATEGORY IN TEXT.REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE THE CATEGORY SO KEEP THAT IN MIND."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCATEGORISE THE INFORMATION : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "nodeName": "Categorise",
          "attachments": "",
          "credentials": "",
          "generativeModelName": ""
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1800,
        "y": 600
      },
      "selected": false
    },
    {
      "id": "codeNode_319",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "codeNode",
        "values": {
          "code": "output = {{LLMNode_447.output.generatedResponse}};",
          "nodeName": "Finalise Categorisation Response"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1800,
        "y": 750
      },
      "selected": false
    },
    {
      "id": "codeNode_473",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "codeNode",
        "values": {
          "code": "let response = \"\";\n\nif({{LLMNode_658.output.generatedResponse}} || {{LLMNode_533.output.images}}){\n  response = {{codeNode_750.output}};\n}\nelse if({{LLMNode_588.output.generatedResponse}}){\n  response = {{codeNode_302.output}};\n}\nelse if({{LLMNode_447.output.generatedResponse}}){\n  response = {{codeNode_319.output}};\n}\nelse{\n  response = {{codeNode_494.output}};\n}\n\noutput = response;",
          "nodeName": "Finalise Response"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1575,
        "y": 900
      },
      "selected": false
    },
    {
      "id": "apiNode_280",
      "data": {
        "label": "dynamicNode node",
        "modes": {},
        "nodeId": "apiNode",
        "values": {
          "url": "{{triggerNode_1.output.webhookUrl}}",
          "body": "{\n  \"value\": \"{{codeNode_473.output}}\",\n  \"metadata\": {\n    \"sheetId\": \"{{triggerNode_1.output.sheetId}}\",\n    \"columnId\": \"{{triggerNode_1.output.columnId}}\",\n    \"rowId\": \"{{triggerNode_1.output.rowId}}\"\n  }\n}",
          "method": "POST",
          "headers": "{\"content-type\":\"application/json\"}",
          "retries": "0",
          "nodeName": "Update Cell",
          "retry_deplay": "0"
        }
      },
      "type": "dynamicNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1575,
        "y": 1050
      },
      "selected": true
    },
    {
      "id": "responseNode_triggerNode_1",
      "data": {
        "label": "Response",
        "nodeId": "graphqlResponseNode",
        "values": {
          "headers": "{}",
          "retries": "0",
          "nodeName": "API Response",
          "webhookUrl": "",
          "retry_delay": "0",
          "outputMapping": "{\n  \"value\": \"{{codeNode_473.output}}\",\n  \"metadata\": {\n    \"sheetId\": \"{{triggerNode_1.output.sheetId}}\",\n    \"columnId\": \"{{triggerNode_1.output.columnId}}\",\n    \"rowId\": \"{{triggerNode_1.output.rowId}}\"\n  }\n}"
        },
        "isResponseNode": true
      },
      "type": "responseNode",
      "measured": {
        "width": 218,
        "height": 95
      },
      "position": {
        "x": 1575,
        "y": 1200
      },
      "selected": false
    }
  ],
  "edges": [
    {
      "id": "triggerNode_1-conditionNode_312",
      "type": "defaultEdge",
      "source": "triggerNode_1",
      "target": "conditionNode_312",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_312-conditionNode_799-590",
      "data": {
        "condition": "Condition 1",
        "branchName": "Condition 1"
      },
      "type": "conditionEdge",
      "source": "conditionNode_312",
      "target": "conditionNode_799",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_799-LLMNode_432-363",
      "data": {
        "condition": "Condition 1"
      },
      "type": "conditionEdge",
      "source": "conditionNode_799",
      "target": "LLMNode_432",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_432-LLMNode_658",
      "type": "defaultEdge",
      "source": "LLMNode_432",
      "target": "LLMNode_658",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_799-LLMNode_608-318",
      "data": {
        "condition": "Condition 2"
      },
      "type": "conditionEdge",
      "source": "conditionNode_799",
      "target": "LLMNode_608",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_658-codeNode_750-308",
      "type": "defaultEdge",
      "source": "LLMNode_658",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_608-LLMNode_533",
      "type": "defaultEdge",
      "source": "LLMNode_608",
      "target": "LLMNode_533",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_533-codeNode_750",
      "type": "defaultEdge",
      "source": "LLMNode_533",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_312-LLMNode_447-248",
      "data": {
        "condition": "Condition 3"
      },
      "type": "conditionEdge",
      "source": "conditionNode_312",
      "target": "LLMNode_447",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "codeNode_750-codeNode_473-689",
      "data": {},
      "type": "defaultEdge",
      "source": "codeNode_750",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_588-codeNode_302",
      "type": "defaultEdge",
      "source": "LLMNode_588",
      "target": "codeNode_302",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "codeNode_302-codeNode_473",
      "type": "defaultEdge",
      "source": "codeNode_302",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "LLMNode_447-codeNode_319",
      "type": "defaultEdge",
      "source": "LLMNode_447",
      "target": "codeNode_319",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "codeNode_319-codeNode_473",
      "type": "defaultEdge",
      "source": "codeNode_319",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_312-codeNode_494-475",
      "data": {
        "condition": "Else",
        "branchName": "Else"
      },
      "type": "conditionEdge",
      "source": "conditionNode_312",
      "target": "codeNode_494",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "codeNode_494-codeNode_473-482",
      "type": "defaultEdge",
      "source": "codeNode_494",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_799-plus-node-addNode_782449-161",
      "data": {
        "condition": "Else"
      },
      "type": "conditionEdge",
      "source": "conditionNode_799",
      "target": "plus-node-addNode_782449",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "plus-node-addNode_782449-codeNode_750-286",
      "type": "defaultEdge",
      "source": "plus-node-addNode_782449",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_312-LLMNode_588-227",
      "data": {
        "condition": "Condition 2"
      },
      "type": "conditionEdge",
      "source": "conditionNode_312",
      "target": "LLMNode_588",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "codeNode_473-apiNode_280",
      "type": "defaultEdge",
      "source": "codeNode_473",
      "target": "apiNode_280",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "apiNode_280-responseNode_triggerNode_1",
      "type": "defaultEdge",
      "source": "apiNode_280",
      "target": "responseNode_triggerNode_1",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "response-trigger_triggerNode_1",
      "type": "responseEdge",
      "source": "triggerNode_1",
      "target": "responseNode_triggerNode_1",
      "sourceHandle": "to-response",
      "targetHandle": "from-trigger"
    }
  ]
}