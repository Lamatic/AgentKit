{
  "nodes": [
    {
      "id": "triggerNode_1",
      "type": "triggerNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "googleDriveNode",
        "modes": {
          "folderUrl": "list"
        },
        "trigger": true,
        "values": {
          "nodeName": "Google Drive",
          "syncMode": "incremental_append",
          "credentials": "",
          "cronExpression": "0 0 00 1/1 * ? * UTC"
        }
      }
    },
    {
      "id": "chunkNode_934",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "chunkNode",
        "values": {
          "nodeName": "chunking",
          "chunkField": "{{triggerNode_1.output.content}}",
          "numOfChars": 200,
          "separators": [
            "\\n\\n",
            "\\n",
            " "
          ],
          "chunkingType": "recursiveCharacterTextSplitter",
          "overlapChars": "20"
        }
      }
    },
    {
      "id": "codeNode_539",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "values": {
          "nodeName": "Extract Chunked Text",
          "code": "let docs =  {{chunkNode_934.output.chunks}};\n\nlet outputDocs = docs.map(doc => doc.pageContent);\n\noutput = outputDocs;"
        }
      }
    },
    {
      "id": "vectorizeNode_623",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "vectorizeNode",
        "values": {
          "nodeName": "Get Vectors",
          "inputText": "{{codeNode_539.output}}",
          "embeddingModelName": {},
          "generativeModelName": {}
        }
      }
    },
    {
      "id": "codeNode_560",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "values": {
          "nodeName": "Transform Metadata",
          "code": "let vectors = {{vectorizeNode_623.output.vectors}};\nlet metadataProps = [];\nlet texts = {{codeNode_539.output}};\n\nfor (const idx in vectors) {\n    let metadata = {}\n    metadata[\"content\"] = texts[idx];\n    metadata[\"file_name\"] = {{triggerNode_1.output.document_key}};\n    metadataProps.push(metadata)\n}\nconsole.log(\"finaldata:\", {\"metadata\": metadataProps, \"vectors\": vectors});\noutput = {\"metadata\": metadataProps, \"vectors\": vectors}"
        }
      }
    },
    {
      "id": "IndexNode_343",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "IndexNode",
        "values": {
          "nodeName": "Index to DB",
          "vectorDB": "",
          "webhookURL": "https://webhook.site/685a66e7-b4d3-40a4-9801-99e3460414f9",
          "primaryKeys": "",
          "vectorsField": "{{codeNode_560.output.vectors}}",
          "metadataField": "{{codeNode_560.output.metadata}}",
          "duplicateOperation": "overwrite",
          "embeddingModelName": {},
          "generativeModelName": {}
        }
      }
    },
    {
      "id": "addNode_545",
      "type": "addNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "addNode",
        "values": {
          "nodeName": ""
        }
      }
    }
  ],
  "edges": [
    {
      "id": "triggerNode_1-chunkNode_934",
      "source": "triggerNode_1",
      "target": "chunkNode_934",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "chunkNode_934-codeNode_539",
      "source": "chunkNode_934",
      "target": "codeNode_539",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_539-vectorizeNode_623",
      "source": "codeNode_539",
      "target": "vectorizeNode_623",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "vectorizeNode_623-codeNode_560",
      "source": "vectorizeNode_623",
      "target": "codeNode_560",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_560-IndexNode_343",
      "source": "codeNode_560",
      "target": "IndexNode_343",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "IndexNode_343-addNode_545",
      "source": "IndexNode_343",
      "target": "addNode_545",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    }
  ]
}